---------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  B:\_YZU\01_teaching\investment\code\cm522\log/01_statistics of return.log
  log type:  text
 opened on:   4 Sep 2022, 17:03:10

. * first, change pwd to class folder
. use "data/Ret.dta" , clear

. 
. * Step 0. generate year and month from date
. ge year = year(date)

. ge month = month(date)

. 
. 
. * Step 1. Summary statistics
. 
. * Q1. How many year of data
. tab year

       year |      Freq.     Percent        Cum.
------------+-----------------------------------
       1925 |        520        0.01        0.01
       1926 |      6,544        0.14        0.15
       1927 |      6,962        0.14        0.29
       1928 |      7,461        0.15        0.44
       1929 |      8,481        0.18        0.62
       1930 |      9,086        0.19        0.81
       1931 |      9,037        0.19        0.99
       1932 |      8,792        0.18        1.18
       1933 |      8,577        0.18        1.35
       1934 |      8,590        0.18        1.53
       1935 |      8,609        0.18        1.71
       1936 |      8,890        0.18        1.89
       1937 |      9,311        0.19        2.09
       1938 |      9,491        0.20        2.28
       1939 |      9,423        0.19        2.48
       1940 |      9,537        0.20        2.67
       1941 |      9,637        0.20        2.87
       1942 |      9,704        0.20        3.07
       1943 |      9,755        0.20        3.28
       1944 |      9,935        0.21        3.48
       1945 |     10,179        0.21        3.69
       1946 |     10,707        0.22        3.91
       1947 |     11,167        0.23        4.15
       1948 |     11,549        0.24        4.38
       1949 |     11,841        0.24        4.63
       1950 |     12,102        0.25        4.88
       1951 |     12,343        0.26        5.13
       1952 |     12,522        0.26        5.39
       1953 |     12,600        0.26        5.65
       1954 |     12,633        0.26        5.92
       1955 |     12,738        0.26        6.18
       1956 |     12,744        0.26        6.44
       1957 |     12,937        0.27        6.71
       1958 |     12,933        0.27        6.98
       1959 |     13,052        0.27        7.25
       1960 |     13,432        0.28        7.53
       1961 |     13,703        0.28        7.81
       1962 |     20,257        0.42        8.23
       1963 |     25,030        0.52        8.75
       1964 |     25,584        0.53        9.27
       1965 |     26,154        0.54        9.82
       1966 |     26,465        0.55       10.36
       1967 |     26,705        0.55       10.92
       1968 |     26,900        0.56       11.47
       1969 |     27,846        0.58       12.05
       1970 |     29,203        0.60       12.65
       1971 |     30,487        0.63       13.28
       1972 |     38,420        0.79       14.08
       1973 |     68,754        1.42       15.50
       1974 |     65,127        1.35       16.85
       1975 |     63,421        1.31       18.16
       1976 |     63,390        1.31       19.47
       1977 |     63,004        1.30       20.77
       1978 |     61,685        1.28       22.05
       1979 |     60,708        1.26       23.30
       1980 |     61,459        1.27       24.58
       1981 |     65,652        1.36       25.93
       1982 |     67,491        1.40       27.33
       1983 |     72,418        1.50       28.83
       1984 |     78,154        1.62       30.44
       1985 |     78,242        1.62       32.06
       1986 |     80,888        1.67       33.74
       1987 |     86,908        1.80       35.53
       1988 |     87,298        1.81       37.34
       1989 |     84,783        1.75       39.09
       1990 |     83,443        1.73       40.82
       1991 |     82,778        1.71       42.53
       1992 |     85,245        1.76       44.29
       1993 |     90,709        1.88       46.17
       1994 |     99,371        2.06       48.23
       1995 |    102,175        2.11       50.34
       1996 |    108,149        2.24       52.58
       1997 |    111,736        2.31       54.89
       1998 |    110,456        2.28       57.17
       1999 |    105,278        2.18       59.35
       2000 |    103,178        2.13       61.48
       2001 |     95,957        1.98       63.47
       2002 |     89,527        1.85       65.32
       2003 |     84,773        1.75       67.07
       2004 |     83,583        1.73       68.80
       2005 |     83,740        1.73       70.54
       2006 |     84,029        1.74       72.27
       2007 |     86,032        1.78       74.05
       2008 |     85,010        1.76       75.81
       2009 |     81,437        1.68       77.50
       2010 |     81,141        1.68       79.17
       2011 |     82,020        1.70       80.87
       2012 |     82,353        1.70       82.57
       2013 |     82,208        1.70       84.28
       2014 |     85,241        1.76       86.04
       2015 |     87,585        1.81       87.85
       2016 |     87,872        1.82       89.67
       2017 |     88,305        1.83       91.49
       2018 |     90,448        1.87       93.36
       2019 |     91,943        1.90       95.27
       2020 |     93,741        1.94       97.21
       2021 |    106,521        2.20       99.41
       2022 |     28,566        0.59      100.00
------------+-----------------------------------
      Total |  4,834,507      100.00

. 
. * Q2. what is summary statistics (average, median, min, max) of returns
. su ret

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
         ret |  4,674,744    1.040656    17.10564       -100       2400

. su ret, de

                             ret
-------------------------------------------------------------
      Percentiles      Smallest
 1%    -38.14433           -100
 5%    -20.92166           -100
10%    -14.14141           -100       Obs           4,674,744
25%        -5.75           -100       Sum of Wgt.   4,674,744

50%            0                      Mean           1.040656
                        Largest       Std. Dev.      17.10564
75%         6.25       1760.465
90%     15.49296           1900       Variance        292.603
95%     24.29378       1988.359       Skewness       7.403817
99%           54           2400       Kurtosis       406.6546

. 
. * Q3. how many unique firms
. * if not installed: search distinct
. distinct permno

        |        Observations
        |      total   distinct
--------+----------------------
 permno |    4834507      36408

. 
. * Q4. mean of return over year
. tab year, su(ret)

            |           Summary of ret
       year |        Mean   Std. Dev.       Freq.
------------+------------------------------------
       1926 |   .10965084   10.943746       6,257
       1927 |   2.3472493   13.296938       6,707
       1928 |   3.1558367   15.086528       7,188
       1929 |   -3.096207   14.780599       8,069
       1930 |  -3.5134713    16.64405       8,803
       1931 |  -3.8337474   22.481922       8,756
       1932 |   3.4136023   38.168697       8,586
       1933 |   9.6576455   36.730023       8,415
       1934 |   2.0908545   19.151809       8,501
       1935 |   4.2232115    17.60631       8,464
       1936 |   3.7179947   14.726529       8,739
       1937 |  -4.7352771   12.935583       9,164
       1938 |    3.634473   19.095572       9,400
       1939 |   1.1933463   22.996674       9,324
       1940 |  -.28646761   13.239153       9,443
       1941 |   -.5987607   12.754875       9,556
       1942 |   2.6876634   14.077489       9,640
       1943 |   4.3324006   15.360221       9,679
       1944 |   2.9163491   8.5967559       9,848
       1945 |   4.2469123   9.3458846      10,071
       1946 |  -.68915018   10.175262      10,561
       1947 |   .07976566   7.9442857      11,061
       1948 |  -.02758355   9.1572375      11,465
       1949 |   1.7085328    7.656002      11,757
       1950 |   2.7454959   8.8692426      12,013
       1951 |   1.3153416   7.1870882      12,263
       1952 |   .81902605   5.8540003      12,450
       1953 |  -.20941546   5.9647037      12,539
       1954 |   3.8819779    7.917839      12,563
       1955 |   1.5652401   7.1477355      12,638
       1956 |   .59511943   6.7649748      12,653
       1957 |  -1.2378157   7.2916107      12,794
       1958 |   4.0139249   7.8124866      12,823
       1959 |   1.2294802   7.5660282      12,879
       1960 |  -.06457969   8.1303949      13,233
       1961 |   2.2265206   8.5146462      13,505
       1962 |  -.86550905    10.55333      18,226
       1963 |   1.2525526    9.653636      24,671
       1964 |   1.4088136   9.4531662      25,207
       1965 |   2.6286264   11.017148      25,751
       1966 |   -.4438001   11.549261      26,098
       1967 |   4.9973268   13.359508      26,296
       1968 |   3.1121463   12.417682      26,341
       1969 |  -2.2353404   11.397036      27,102
       1970 |  -.65219907   13.975364      28,449
       1971 |   1.7060979    12.19062      29,597
       1972 |   .46186598   11.028961      31,343
       1973 |  -3.4892656   15.100221      66,320
       1974 |  -2.2796259   15.944326      61,122
       1975 |   4.5300964   18.683193      58,981
       1976 |    3.592762   15.325905      59,199
       1977 |   1.8252967   12.519803      59,613
       1978 |   2.2216995   15.024489      58,360
       1979 |   3.0790357   14.021743      57,825
       1980 |   3.2737621   16.957856      58,271
       1981 |   .05970985     14.7195      62,274
       1982 |   1.9481733   16.988609      64,390
       1983 |   2.6731923   17.738669      68,740
       1984 |  -.97853851   14.801433      75,417
       1985 |   1.8913107   17.004638      75,387
       1986 |   .59064824   17.956413      77,026
       1987 |  -.42016516   19.026297      83,365
       1988 |   1.4921254   16.338165      84,743
       1989 |   .96461012   16.330464      82,349
       1990 |  -1.9283597   19.634767      81,211
       1991 |    3.507579   23.096385      80,187
       1992 |   2.0227726   22.476291      82,144
       1993 |   1.9839189   18.367559      86,869
       1994 |   -.4365965   15.146497      96,076
       1995 |   2.2204497   16.474999      98,921
       1996 |   1.4090305   17.099641     104,546
       1997 |   1.5668083    17.26131     108,750
       1998 |  -.11493118   22.000135     107,692
       1999 |   2.4937475   23.874172     101,889
       2000 |  -.78913914   25.041853      99,696
       2001 |   1.9229514   25.862196      93,105
       2002 |  -.92108571   20.339081      86,606
       2003 |   4.5782956   17.921619      81,646
       2004 |   1.6819313   14.304373      80,295
       2005 |   .45746242   12.431111      80,745
       2006 |   1.4650325   12.157555      81,158
       2007 |  -.26641831   12.302287      83,085
       2008 |  -4.3595473   18.609026      83,119
       2009 |   4.4148209   24.029515      79,418
       2010 |    1.987772   14.151751      78,868
       2011 |  -.72296432   13.338726      79,957
       2012 |    1.311744   12.766713      80,479
       2013 |   2.2628155   11.884474      80,162
       2014 |   .24114963   11.768424      83,217
       2015 |  -.57861542   14.869551      85,833
       2016 |   1.2539041   14.874705      86,399
       2017 |    1.218423   12.550576      86,657
       2018 |  -1.0969755   13.474507      88,683
       2019 |   1.6859925   16.329097      90,354
       2020 |   2.2883784   23.148233      91,654
       2021 |    1.038233   18.175714     102,974
       2022 |  -1.9620796   15.107088      28,079
------------+------------------------------------
      Total |   1.0406565   17.105641   4,674,744

. 
. * Q5. draw a plot for mean of return over year
. collapse (mean) ret, by(year)

. twoway (line ret year)

. twoway (bar ret year)

. 
. *close log file
. log close
      name:  <unnamed>
       log:  B:\_YZU\01_teaching\investment\code\cm522\log/01_statistics of return.log
  log type:  text
 closed on:   4 Sep 2022, 17:03:20
---------------------------------------------------------------------------------------------------------
